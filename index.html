<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููู ุฅูุฌุงุฒ ุงููุนููุฉ ูุฑูุงู ุงูุบูุงุฑู</title>
    
    <!-- Font Awesome - ูุณุฎุฉ ูุญุณูุฉ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/api/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-storage-compat.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* ุชุญููู ุณุฑูุน */
        body {
            opacity: 0;
            animation: fadeIn 0.3s ease forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Loading Animation -->
    <div class="loader">
        <div class="loader-content">
            <div class="loader-logo">
                <div class="logo-circle">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h3>ููู ุงูุฅูุฌุงุฒ ุงูุฑููู</h3>
                <p>ุงููุนููุฉ ูุฑูุงู ุงูุบูุงุฑู</p>
            </div>
            <div class="loader-bar">
                <div class="progress"></div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="app-container" style="display: none;">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-left">
                <button class="nav-btn menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                    <span>ููู ุงูุฅูุฌุงุฒ</span>
                </div>
            </div>
            <div class="nav-center">
                <div class="nav-info">
                    <div class="info-item">
                        <i class="fas fa-user"></i>
                        <span>ุงููุนููุฉ: ูุฑูุงู ุงูุบูุงุฑู</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-school"></i>
                        <span>ุงุจุชุฏุงุฆูุฉ ุงููุฎุจุฉ</span>
                    </div>
                    <div class="info-item" id="connectionStatusItem">
                        <i class="fas fa-wifi"></i>
                        <span id="connectionStatus">ูุญูู</span>
                    </div>
                </div>
            </div>
            <div class="nav-right">
                <button class="nav-btn" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=ูุฑูุงู+ุงูุบูุงุฑู&background=4A6FA5&color=fff&size=128" 
                         alt="ุงููุนููุฉ ูุฑูุงู" 
                         onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%234A6FA5%22/><text x=%2250%22 y=%2255%22 font-size=%2240%22 text-anchor=%22middle%22 fill=%22white%22>ู</text></svg>'">
                </div>
            </div>
        </nav>

        <!-- Sidebar - ุนูู ุงููุณุงุฑ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-user">
                    <div class="user-avatar">
                        <img src="https://ui-avatars.com/api/?name=ูุฑูุงู+ุงูุบูุงุฑู&background=4A6FA5&color=fff&size=128" 
                             alt="ูุฑูุงู ุงูุบูุงุฑู">
                    </div>
                    <div class="user-info">
                        <h4>ูุฑูุงู ุงูุบูุงุฑู</h4>
                        <p>ูุนููุฉ ุงูุตููู ุงูุฃูููุฉ</p>
                    </div>
                </div>
                <button class="sidebar-close" id="sidebarClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="sidebar-menu">
                <a href="#" class="menu-item active" data-tab="dashboard">
                    <i class="fas fa-home"></i>
                    <span>ุงูุฑุฆูุณูุฉ</span>
                </a>
                <a href="#" class="menu-item" data-tab="fullPortfolio">
                    <i class="fas fa-book"></i>
                    <span>ุงูููู ุงููุงูู</span>
                    <span class="menu-badge" id="fullPortfolioBadge">0</span>
                </a>
                <a href="#" class="menu-item" data-tab="arabic">
                    <i class="fas fa-font"></i>
                    <span>ุงููุบุฉ ุงูุนุฑุจูุฉ</span>
                    <span class="menu-badge" id="arabicBadge">0</span>
                </a>
                <a href="#" class="menu-item" data-tab="english">
                    <i class="fas fa-language"></i>
                    <span>ุงูุฅูุฌููุฒูุฉ</span>
                    <span class="menu-badge" id="englishBadge">0</span>
                </a>
                <a href="#" class="menu-item" data-tab="quran">
                    <i class="fas fa-book-quran"></i>
                    <span>ุงููุฑุขู ุงููุฑูู</span>
                    <span class="menu-badge" id="quranBadge">0</span>
                </a>
                <a href="#" class="menu-item" data-tab="math">
                    <i class="fas fa-calculator"></i>
                    <span>ุงูุฑูุงุถูุงุช</span>
                    <span class="menu-badge" id="mathBadge">0</span>
                </a>
                <a href="#" class="menu-item" data-tab="science">
                    <i class="fas fa-flask"></i>
                    <span>ุงูุนููู</span>
                    <span class="menu-badge" id="scienceBadge">0</span>
                </a>
                <a href="#" class="menu-item" data-tab="activities">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>ุงููุดุงุทุงุช</span>
                    <span class="menu-badge" id="activitiesBadge">0</span>
                </a>
                
                <div class="menu-divider"></div>
                
                <a href="#" class="menu-item" data-tab="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช</span>
                </a>
                <a href="#" class="menu-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <button class="btn-primary btn-block" onclick="showAddModal('quick')">
                    <i class="fas fa-plus-circle"></i>
                    ุฅุถุงูุฉ ุณุฑูุนุฉ
                </button>
                <button class="btn-secondary btn-block mt-10" onclick="showPrintModal()">
                    <i class="fas fa-print"></i>
                    ุทุจุงุนุฉ ุงูููู
                </button>
                <button class="btn-success btn-block mt-10" onclick="backupData()">
                    <i class="fas fa-download"></i>
                    ูุณุฎุฉ ุงุญุชูุงุทูุฉ
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard -->
            <section id="dashboard" class="tab-content active">
                <div class="content-header">
                    <h1>ูุฑุญุจุงู ุจุนูุฏุชูุ ุงููุนููุฉ ูุฑูุงู ๐</h1>
                    <p>ูุฐุง ูู ููู ุฅูุฌุงุฒู ุงูุฑููู ุงููุชูุงููุ ููููู ุฅุฏุงุฑุฉ ุฌููุน ุฃุนูุงูู ูุฃูุดุทุชู ุงูุชุนููููุฉ ูู ููุง</p>
                </div>
                
                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalItems">0</h3>
                            <p>ุฅุฌูุงูู ุงูุนูุงุตุฑ</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-images"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalImages">0</h3>
                            <p>ุนุฏุฏ ุงูุตูุฑ</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="thisMonth">0</h3>
                            <p>ูุฐุง ุงูุดูุฑ</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="completionRate">0%</h3>
                            <p>ูุนุฏู ุงูุฅูุฌุงุฒ</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-bolt"></i>
                        ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ
                    </h2>
                    <div class="quick-actions-grid">
                        <button class="action-card" onclick="switchTab('fullPortfolio')">
                            <div class="action-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <h4>ุงูููู ุงููุงูู</h4>
                            <p>ุนุฑุถ ุฌููุน ุงูุนูุงุตุฑ ูุน ุงูุตูุฑ</p>
                        </button>
                        <button class="action-card" onclick="showAddModal('arabic')">
                            <div class="action-icon">
                                <i class="fas fa-font"></i>
                            </div>
                            <h4>ุญุฑู ุนุฑุจู</h4>
                            <p>ุฅุถุงูุฉ ูุดุงุท ูุญุฑู ุฌุฏูุฏ</p>
                        </button>
                        <button class="action-card" onclick="showAddModal('english')">
                            <div class="action-icon">
                                <i class="fas fa-language"></i>
                            </div>
                            <h4>ูููุฉ ุฅูุฌููุฒูุฉ</h4>
                            <p>ุฅุถุงูุฉ ูุดุงุท ููููุฉ ุฌุฏูุฏุฉ</p>
                        </button>
                        <button class="action-card" onclick="showAddModal('quran')">
                            <div class="action-icon">
                                <i class="fas fa-book-quran"></i>
                            </div>
                            <h4>ุณูุฑุฉ ูุฑุขููุฉ</h4>
                            <p>ุฅุถุงูุฉ ูุดุงุท ูุณูุฑุฉ ุฌุฏูุฏุฉ</p>
                        </button>
                        <button class="action-card" onclick="showPrintModal()">
                            <div class="action-icon">
                                <i class="fas fa-print"></i>
                            </div>
                            <h4>ุทุจุงุนุฉ ุงูููู</h4>
                            <p>ุทุจุงุนุฉ ุงูููู ุงููุงูู</p>
                        </button>
                        <button class="action-card" onclick="backupData()">
                            <div class="action-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <h4>ูุณุฎุฉ ุงุญุชูุงุทูุฉ</h4>
                            <p>ุญูุธ ูุณุฎุฉ ูู ุงูุจูุงูุงุช</p>
                        </button>
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="section-card">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-history"></i>
                            ุฃุญุฏุซ ุงูุฅุถุงูุงุช
                        </h2>
                        <button class="btn-text" onclick="switchTab('fullPortfolio')">
                            ุนุฑุถ ุงููู
                            <i class="fas fa-arrow-left"></i>
                        </button>
                    </div>
                    <div class="recent-list" id="recentActivity">
                        <!-- ุณูุชู ููุคูุง ุจุงูุจูุงูุงุช -->
                    </div>
                </div>
            </section>

            <!-- Full Portfolio Page -->
            <section id="fullPortfolio" class="tab-content">
                <div class="content-header">
                    <h1><i class="fas fa-book-open"></i> ุงูููู ุงููุงูู</h1>
                    <p>ุนุฑุถ ุฌููุน ุงูููุงุฏ ูุงูุฃูุดุทุฉ ูุน ุงูุตูุฑ ูุงูุชูุงุตูู ูู ุตูุญุฉ ูุงุญุฏุฉ</p>
                </div>
                
                <div class="portfolio-controls">
                    <button class="btn-primary" onclick="printFullPortfolio()">
                        <i class="fas fa-print"></i>
                        ุทุจุงุนุฉ ุงูููู ุงููุงูู
                    </button>
                    <button class="btn-secondary" onclick="exportFullPortfolio()">
                        <i class="fas fa-file-pdf"></i>
                        ุชุตุฏูุฑ ูู PDF
                    </button>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Full Portfolio Container -->
                <div class="full-portfolio" id="fullPortfolioContainer">
                    <!-- ุณูุชู ููุคูุง ุจุงูุจูุงูุงุช -->
                </div>
            </section>

            <!-- Arabic Content -->
            <section id="arabic" class="tab-content">
                <div class="content-header">
                    <h1><i class="fas fa-font"></i> ุงููุบุฉ ุงูุนุฑุจูุฉ</h1>
                    <p>ุฅุฏุงุฑุฉ ุญุฑูู ูุฃูุดุทุฉ ุงููุบุฉ ุงูุนุฑุจูุฉ</p>
                </div>
                
                <div class="section-actions">
                    <button class="btn-primary" onclick="showAddModal('arabic')">
                        <i class="fas fa-plus"></i>
                        ุฅุถุงูุฉ ุญุฑู ุฌุฏูุฏ
                    </button>
                    <button class="btn-secondary" onclick="exportSection('arabic')">
                        <i class="fas fa-download"></i>
                        ุชุตุฏูุฑ ุงููุณู
                    </button>
                </div>
                
                <div class="items-grid" id="arabicItems">
                    <!-- ุงูุนูุงุตุฑ ุณุชุธูุฑ ููุง -->
                </div>
            </section>

            <!-- ุจุงูู ุงูุฃูุณุงู ุจููุณ ุงููููู -->
            <!-- English, Quran, Math, Science, Activities -->

            <!-- Reports -->
            <section id="reports" class="tab-content">
                <div class="content-header">
                    <h1><i class="fas fa-chart-bar"></i> ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช</h1>
                    <p>ุชูุงุฑูุฑ ููุตูุฉ ูุฅุญุตุงุฆูุงุช ุนู ููู ุงูุฅูุฌุงุฒ</p>
                </div>
                
                <div class="reports-container" id="reportsContainer">
                    <!-- ุณูุชู ููุคูุง ุจุงูุชูุฑูุฑ -->
                </div>
            </section>

            <!-- Settings -->
            <section id="settings" class="tab-content">
                <div class="content-header">
                    <h1><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช</h1>
                    <p>ุฅุนุฏุงุฏุงุช ุงููุธุงู ูุงูุชุฎุตูุต</p>
                </div>
                
                <div class="settings-container">
                    <div class="setting-card">
                        <h3><i class="fas fa-palette"></i> ุงูุชุตููู</h3>
                        <div class="setting-content">
                            <div class="setting-item">
                                <label>ุงููุถุน ุงูุฏุงูู</label>
                                <label class="switch">
                                    <input type="checkbox" id="darkModeToggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>ุนุฑุถ ุงูุตูุฑ</label>
                                <select id="imageQuality">
                                    <option value="high">ุนุงููุฉ ุงูุฌูุฏุฉ</option>
                                    <option value="medium" selected>ูุชูุณุทุฉ</option>
                                    <option value="low">ููุฎูุถุฉ</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h3><i class="fas fa-database"></i> ุงูุจูุงูุงุช</h3>
                        <div class="setting-content">
                            <div class="setting-item">
                                <label>ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ</label>
                                <label class="switch">
                                    <input type="checkbox" id="autoBackup" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <button class="btn-secondary" onclick="clearAllData()">
                                <i class="fas fa-trash"></i>
                                ุญุฐู ุฌููุน ุงูุจูุงูุงุช
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ</h3>
                <button class="close-btn" onclick="closeModal('addModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addForm" onsubmit="return false;">
                    <input type="hidden" id="modalSubject">
                    
                    <div class="form-group">
                        <label for="itemTitle">
                            <i class="fas fa-heading"></i>
                            ุงูุนููุงู
                        </label>
                        <input type="text" id="itemTitle" placeholder="ุฃุฏุฎู ุงูุนููุงู..." required>
                        <small>ูุซุงู: ุญุฑู ุงูุฃููุ ุณูุฑุฉ ุงููุงุชุญุฉุ ููููู ุงูุฌูุน...</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="itemDescription">
                            <i class="fas fa-align-left"></i>
                            ุงููุตู
                        </label>
                        <textarea id="itemDescription" placeholder="ูุตู ุงููุดุงุท..." rows="4"></textarea>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-images"></i> ุงูุตูุฑ (ุงุฎุชูุงุฑู)</h4>
                        <p class="section-description">ููููู ุฑูุน ุตูุฑุชูู ููู ูุดุงุท</p>
                        
                        <div class="image-upload-grid">
                            <div class="image-upload-box" onclick="document.getElementById('imageFile1').click()">
                                <input type="file" id="imageFile1" class="file-input" accept="image/*" 
                                       onchange="previewImage(this, 'imagePreview1')">
                                <div class="upload-placeholder" id="imagePreview1">
                                    <i class="fas fa-camera"></i>
                                    <span>ุงูุตูุฑุฉ ุงูุฃููู</span>
                                    <small>ุงููุฑ ูุงุฎุชูุงุฑ ุตูุฑุฉ</small>
                                </div>
                            </div>
                            
                            <div class="image-upload-box" onclick="document.getElementById('imageFile2').click()">
                                <input type="file" id="imageFile2" class="file-input" accept="image/*" 
                                       onchange="previewImage(this, 'imagePreview2')">
                                <div class="upload-placeholder" id="imagePreview2">
                                    <i class="fas fa-camera"></i>
                                    <span>ุงูุตูุฑุฉ ุงูุซุงููุฉ</span>
                                    <small>ุงููุฑ ูุงุฎุชูุงุฑ ุตูุฑุฉ</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('addModal')">
                            <i class="fas fa-times"></i>
                            ุฅูุบุงุก
                        </button>
                        <button type="submit" class="btn-primary" onclick="saveItem()">
                            <i class="fas fa-save"></i>
                            ุญูุธ ุงูุนูุตุฑ
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Print Modal -->
    <div class="modal" id="printModal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3><i class="fas fa-print"></i> ุฎูุงุฑุงุช ุงูุทุจุงุนุฉ</h3>
                <button class="close-btn" onclick="closeModal('printModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="print-options">
                    <div class="option-group">
                        <label class="option-label">
                            <input type="radio" name="printOption" value="full" checked>
                            <span>ุงูููู ุงููุงูู</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="printOption" value="current">
                            <span>ุงููุณู ุงูุญุงูู ููุท</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="printOption" value="selected">
                            <span>ุนูุงุตุฑ ูุญุฏุฏุฉ</span>
                        </label>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeModal('printModal')">ุฅูุบุงุก</button>
                    <button class="btn-primary" onclick="handlePrint()">
                        <i class="fas fa-print"></i>
                        ุทุจุงุนุฉ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Firebase Configuration -->
    <script>
        // ุฅุนุฏุงุฏุงุช Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDLJPdy0F4W6iqkUCnKw1jc2CCeGNe5cBU",
            authDomain: "teacher-portfolio-fryal.firebaseapp.com",
            projectId: "teacher-portfolio-fryal",
            storageBucket: "teacher-portfolio-fryal.firebasestorage.app",
            messagingSenderId: "1054582250352",
            appId: "1:1054582250352:web:0fbb6f5a8c2763ffcc4db5",
            measurementId: "G-74HC2DH4YP"
        };

        // Initialize Firebase
        try {
            const app = firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();
            const storage = firebase.storage();

            console.log("โ Firebase initialized successfully!");
            
            // ุฌุนููุง ูุชุงุญุฉ ุนุงูููุงู
            window.firebaseApp = app;
            window.firebaseAuth = auth;
            window.firebaseDb = db;
            window.firebaseStorage = storage;

        } catch (error) {
            console.error("โ Firebase initialization error:", error);
        }

        // ุฅุฎูุงุก ุงูุชุญููู ุจุนุฏ 1.5 ุซุงููุฉ
        setTimeout(() => {
            const loader = document.querySelector('.loader');
            if (loader) {
                loader.style.display = 'none';
            }
            const appContainer = document.querySelector('.app-container');
            if (appContainer) {
                appContainer.style.display = 'flex';
            }
        }, 1500);
    </script>

    <!-- Main Script -->
    <script src="script.js"></script>
</body>
</html>
